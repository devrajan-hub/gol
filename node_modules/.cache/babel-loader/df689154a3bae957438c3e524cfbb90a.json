{"ast":null,"code":"import $ from 'jquery';\n$(document).ready(function () {\n  $(\".example\").piechart([[\"Country\", \"M inhabitants\"], [\"China\", 1360, 'blue'], [\"India\", 1234], [\"USA\", 316], [\"Indonesia\", 237], [\"Brazil\", 201]]);\n  $(\".piechart-flatmin\").on('mouseenter', '.sector-s', hoverState);\n  $(\".piechart-flatmin\").on('mouseleave', '.sector-s', hoverState);\n  $(\".piechart-flatmin\").on('click', '.sector-s', clickState);\n  $(window).resize(resizeEvent);\n});\n\n(function ($) {\n  $.fn.piechart = function (e) {\n    chart = {};\n    var ele = $('<div class=\"piechart-flatmin\"></div>');\n    ele.data('value', e[0][1]).data('key', e[0][0]);\n    e.splice(0, 1);\n    var pieHole = $('<div class=\"piehole\"></div>');\n    pieHole.css({\n      background: this.getBackground()\n    });\n    pieHole.append('<div class=\"piehole-text\"><p class=\"flatmin-title\"></p><p class=\"flatmin-percentage\"></p><p class=\"flatmin-value\"></p></div>');\n    ele.append('<div class=\"ratio\"></div>').append(pieHole);\n    this.append(ele);\n    var w = ele.width();\n    resp(w, ele);\n    chart.total = totalValue(e);\n    var os = 0;\n    $.each(e, function (v, k) {\n      var d = {\n        color: get_random_color()\n      };\n\n      if (typeof k[1] == 'number') {\n        sector = {};\n        sector.val = k[1];\n        sector.per = k[1] / chart.total * 100;\n        sector.nm = k[0];\n        sector.os = os;\n        sector.color = k[2];\n        var y = $.extend({}, d, sector);\n        paintChart(y, ele);\n        os += 360 * sector.per / 100;\n      }\n    });\n    return this;\n  };\n\n  $.fn.getBackground = function () {\n    var bgcolor = '#FFF';\n    $.each(this.parents(), function (v, k) {\n      console.log(k);\n      var rgb = $(k).css('background-color');\n      var rgba = rgb.indexOf('rgba');\n\n      if (rgba == -1) {\n        bgcolor = rgb;\n        return false;\n      }\n    });\n    return bgcolor;\n  };\n})(jQuery);\n\nfunction resp(w, ele) {\n  if (w > 360) ele.removeClass('m').removeClass('s');else if (w > 250 && w < 360) ele.addClass('m').removeClass('s');else if (w > 100 && w < 250) ele.addClass('s').removeClass('m');\n}\n\nfunction paintChart(s, e) {\n  var sec = $('<div class=\"sector\"></div>');\n  sec.css(offset(s.os));\n  e.append(sec);\n  sec.data('val', s.val).data('per', s.per).data('title', s.nm);\n  sec.attr('per', s.per);\n  var h = e.height();\n  var secs = $('<div class=\"sector-s\"></div>');\n  var secf = $('<div class=\"sector-f\"></div>');\n  secs.css(percentToPie(s, h).second);\n  secf.css(percentToPie(s, h).first);\n  secf.append(secs);\n  sec.append(secf);\n\n  if (s.per > 50 && s.per <= 100) {\n    var secft = $('<div class=\"sector-f\"></div>');\n    secft.append('<div class=\"sector-s\" style=\"background-color:' + s.color + '\"></div>');\n    secft.css({\n      \"clip\": \"rect(\" + 0 + \"px, \" + h + \"px, \" + h + \"px, \" + h / 2 + \"px)\"\n    });\n    sec.append(secft);\n  }\n}\n\nfunction hoverState() {\n  $(this).parents('.sector').toggleClass('hover');\n}\n\nfunction clickState() {\n  var sector = $(this).parents('.sector');\n  var pieHole = sector.parents('.piechart-flatmin').find('.piehole').find('.piehole-text');\n  var value = sector.parents('.piechart-flatmin').data('value');\n  var key = sector.parents('.piechart-flatmin').data('key');\n  pieHole.find('.flatmin-value').text(sector.data('val') + ' ' + value);\n  pieHole.find('.flatmin-percentage').text(Math.round(sector.data('per') * 100) / 100);\n  pieHole.find('.flatmin-title').text(sector.data('title'));\n  pieHole.fadeIn();\n}\n\nfunction resizeEvent() {\n  $(\".piechart-flatmin\").each(function () {\n    var t = $(this);\n    resp(t.width(), t);\n  });\n  $(\".piechart-flatmin\").find('.sector').each(function () {\n    var e = $(this);\n    var p = {\n      per: e.data('per')\n    };\n    var h = e.width();\n    e.find('.sector-f').eq(0).css(percentToPie(p, h).first).find('.sector-s').css(percentToPie(p, h).second);\n\n    if (p.per > 50 && p.per <= 100) {\n      e.find('.sector-f').eq(1).css({\n        \"clip\": \"rect(\" + 0 + \"px, \" + h + \"px, \" + h + \"px, \" + h / 2 + \"px)\"\n      });\n    }\n  });\n}\n\nfunction offset(o) {\n  var s = {\n    \"transform\": \"rotate(\" + o + \"deg)\",\n    \"-ms-transform\": \"rotate(\" + o + \"deg)\",\n    \"-webkit-transform\": \"rotate(\" + o + \"deg)\"\n  };\n  return s;\n}\n\nfunction percentToPie(s, h) {\n  var deg;\n  var o;\n  var cssopt = {};\n\n  if (s.per <= 25) {\n    s.per += 0.5;\n    cssopt.scliptop = 0;\n    cssopt.sclipright = h;\n    cssopt.sclipbottom = h / 2;\n    cssopt.sclipleft = h / 2;\n    cssopt.srotate = -90 + 360 * (s.per / 100);\n    cssopt.fcliptop = 0;\n    cssopt.fclipright = h;\n    cssopt.fclipbottom = h / 2;\n    cssopt.fclipleft = h / 2;\n  } else if (s.per > 25 && s.per <= 50) {\n    s.per += 0.5;\n    cssopt.scliptop = 0;\n    cssopt.sclipright = h;\n    cssopt.sclipbottom = h;\n    cssopt.sclipleft = h / 2;\n    cssopt.srotate = -180 + 360 * (s.per / 100);\n    cssopt.fcliptop = 0;\n    cssopt.fclipright = h;\n    cssopt.fclipbottom = h;\n    cssopt.fclipleft = h / 2;\n  } else if (s.per > 50 && s.per <= 75) {\n    s.per += 0.5;\n    cssopt.scliptop = 0;\n    cssopt.sclipright = h;\n    cssopt.sclipbottom = h;\n    cssopt.sclipleft = h / 2;\n    cssopt.srotate = -180 + 360 * ((s.per - 50) / 100);\n    cssopt.fcliptop = 0;\n    cssopt.fclipright = h;\n    cssopt.fclipbottom = h;\n    cssopt.fclipleft = h / 2;\n    cssopt.frotate = 179;\n  } else if (s.per > 75 && s.per <= 100) {\n    s.per += 0.5;\n    cssopt.scliptop = 0;\n    cssopt.sclipright = h;\n    cssopt.sclipbottom = h;\n    cssopt.sclipleft = h / 2;\n    cssopt.srotate = -360 + 360 * (s.per / 100);\n    cssopt.fcliptop = 0;\n    cssopt.fclipright = h;\n    cssopt.fclipbottom = h;\n    cssopt.fclipleft = h / 2;\n    cssopt.frotate = 179;\n  }\n\n  o = {\n    second: {\n      \"clip\": \"rect(\" + cssopt.scliptop + \"px, \" + cssopt.sclipright + \"px, \" + cssopt.sclipbottom + \"px, \" + cssopt.sclipleft + \"px)\",\n      \"transform\": \"rotate(\" + cssopt.srotate + \"deg)\",\n      \"-ms-transform\": \"rotate(\" + cssopt.srotate + \"deg)\",\n      \"-webkit-transform\": \"rotate(\" + cssopt.srotate + \"deg)\",\n      background: s.color\n    },\n    first: {\n      \"clip\": \"rect(\" + cssopt.fcliptop + \"px, \" + cssopt.fclipright + \"px, \" + cssopt.fclipbottom + \"px, \" + cssopt.fclipleft + \"px)\"\n    }\n  };\n\n  if (s.per > 50 && s.per <= 100) {\n    o.first = {\n      \"clip\": \"rect(\" + cssopt.fcliptop + \"px, \" + cssopt.fclipright + \"px, \" + cssopt.fclipbottom + \"px, \" + cssopt.fclipleft + \"px)\",\n      \"transform\": \"rotate(\" + cssopt.frotate + \"deg)\",\n      \"-ms-transform\": \"rotate(\" + cssopt.frotate + \"deg)\",\n      \"-webkit-transform\": \"rotate(\" + cssopt.frotate + \"deg)\"\n    };\n  }\n\n  return o;\n}\n\nfunction totalValue(a) {\n  var u = 0;\n  $.each(a, function (v, k) {\n    if (typeof k[1] == 'number') u += k[1];\n  });\n  return u;\n}\n\nfunction get_random_color() {\n  var color = [\"#2ecc71\", \"#3498db\", \"#9b59b6\", \"#e74c3c\", \"#e67e22\", \"#34495e\", \"#8e44ad\", \"#27ae60\"];\n  ci++;\n\n  if (ci > color.length - 1) {\n    ci = 0;\n  }\n\n  console.log(ci);\n  return color[ci];\n}","map":{"version":3,"sources":["D:/rajan-work/saas/src/assets/js/canvasjs.min.js"],"names":["$","document","ready","piechart","on","hoverState","clickState","window","resize","resizeEvent","fn","e","chart","ele","data","splice","pieHole","css","background","getBackground","append","w","width","resp","total","totalValue","os","each","v","k","d","color","get_random_color","sector","val","per","nm","y","extend","paintChart","bgcolor","parents","console","log","rgb","rgba","indexOf","jQuery","removeClass","addClass","s","sec","offset","attr","h","height","secs","secf","percentToPie","second","first","secft","toggleClass","find","value","key","text","Math","round","fadeIn","t","p","eq","o","deg","cssopt","scliptop","sclipright","sclipbottom","sclipleft","srotate","fcliptop","fclipright","fclipbottom","fclipleft","frotate","a","u","ci","length"],"mappings":"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","sourcesContent":["import $ from'jquery';\r\n$(document).ready(function() {\r\n\t$(\".example\").piechart([\r\n\t\t[\"Country\", \"M inhabitants\"],\r\n\t\t[\"China\", 1360, 'blue'],\r\n\t\t[\"India\", 1234],\r\n\t\t[\"USA\", 316],\r\n\t\t[\"Indonesia\", 237],\r\n\t\t[\"Brazil\", 201]\r\n\r\n\t\t]);\r\n\t$(\".piechart-flatmin\").on('mouseenter','.sector-s',hoverState);\r\n\t$(\".piechart-flatmin\").on('mouseleave','.sector-s',hoverState);\r\n\t$(\".piechart-flatmin\").on('click','.sector-s',clickState);\r\n\t$(window).resize(resizeEvent);\r\n\r\n});\r\n\r\n\r\n(function ( $ ) {\r\n    $.fn.piechart = function(e) {\r\n    \tchart = {};\r\n    \tvar ele = $('<div class=\"piechart-flatmin\"></div>');\r\n    \tele.data('value', e[0][1]).data('key',e[0][0]);\r\n    \te.splice(0,1);\r\n    \tvar pieHole = $('<div class=\"piehole\"></div>');\r\n    \tpieHole.css({background: this.getBackground()});\r\n    \tpieHole.append('<div class=\"piehole-text\"><p class=\"flatmin-title\"></p><p class=\"flatmin-percentage\"></p><p class=\"flatmin-value\"></p></div>')\r\n    \tele.append('<div class=\"ratio\"></div>').append(pieHole);\r\n    \tthis.append(ele);\r\n    \tvar w = ele.width();\r\n    \tresp(w,ele);\r\n    \tchart.total = totalValue(e);\r\n    \tvar os = 0;\r\n    \t$.each(e,function(v,k) {\r\n    \t\tvar d = {color : get_random_color()};\r\n    \t\tif( typeof k[1] == 'number') {\r\n    \t\t\tsector = {};\r\n    \t\t\tsector.val = k[1];\r\n    \t\t\tsector.per = (k[1]/chart.total)*100;\r\n    \t\t\tsector.nm = k[0];\r\n    \t\t\tsector.os = os;\r\n    \t\t\tsector.color = k[2];\r\n    \t\t\tvar y = $.extend({}, d,sector);\r\n    \t\t\tpaintChart(y,ele);\r\n    \t\t\tos += 360*sector.per/100;\r\n    \t\t}\r\n    \t});\r\n        return this;\r\n    }; \r\n    $.fn.getBackground = function() {\r\n\t\tvar bgcolor = '#FFF';\r\n\t\t$.each(this.parents(), function(v,k) {\r\n\t\t\tconsole.log(k);\r\n\t\t\tvar rgb = $(k).css('background-color');\r\n\t\t\tvar rgba = rgb.indexOf('rgba');\r\n\t\t\tif(rgba == -1) {\r\n\t\t\t\tbgcolor = rgb;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn bgcolor;\r\n\t}\r\n}( jQuery ));\r\n\r\nfunction resp(w,ele) {\r\n\tif(w>360) ele.removeClass('m').removeClass('s');\r\n\telse if(w > 250 && w<360) ele.addClass('m').removeClass('s');\r\n    else if (w > 100 && w<250) ele.addClass('s').removeClass('m');\r\n}\r\nfunction paintChart(s,e) {\r\n\tvar sec = $('<div class=\"sector\"></div>');\r\n\tsec.css(  offset(s.os) );\r\n\te.append(sec);\r\n\tsec.data('val',s.val).data('per',s.per).data('title',s.nm);\r\n\tsec.attr('per',s.per);\r\n\tvar h = e.height();\r\n\tvar secs = $('<div class=\"sector-s\"></div>');\r\n\tvar secf = $('<div class=\"sector-f\"></div>');\r\n\tsecs.css( percentToPie(s,h).second );\r\n\tsecf.css( percentToPie(s,h).first );\r\n\tsecf.append(secs);\r\n\tsec.append(secf);\r\n\tif(s.per>50&&s.per<=100) {\r\n\t\tvar secft = $('<div class=\"sector-f\"></div>');\r\n\t\tsecft.append('<div class=\"sector-s\" style=\"background-color:'+s.color+'\"></div>');\r\n\t\tsecft.css({\"clip\": \"rect(\"+0+\"px, \"+h+\"px, \"+h+\"px, \"+(h/2)+\"px)\"});\r\n\t\tsec.append(secft);\r\n\t}\r\n}\r\n\r\nfunction hoverState() {\r\n\t$(this).parents('.sector').toggleClass('hover');\r\n}\r\nfunction clickState() {\r\n\tvar sector = $(this).parents('.sector');\r\n\tvar pieHole = sector.parents('.piechart-flatmin').find('.piehole').find('.piehole-text');\r\n\tvar value = sector.parents('.piechart-flatmin').data('value');\r\n\tvar key = sector.parents('.piechart-flatmin').data('key');\r\n\tpieHole.find('.flatmin-value').text(sector.data('val')+' '+value);\r\n\tpieHole.find('.flatmin-percentage').text(Math.round(sector.data('per')*100)/100);\r\n\tpieHole.find('.flatmin-title').text(sector.data('title'));\r\n\tpieHole.fadeIn();\r\n}\r\nfunction resizeEvent() {\r\n\t$(\".piechart-flatmin\").each(function() {\r\n\t\tvar t = $(this);\r\n\t\tresp(t.width(),t);\r\n\t});\r\n\t$(\".piechart-flatmin\").find('.sector').each(function() {\r\n\t\tvar e = $(this);\r\n\t\tvar p = {per: e.data('per')};\r\n\t\tvar h = e.width();\r\n\t\te.find('.sector-f').eq(0).css( percentToPie(p,h).first).find('.sector-s').css( percentToPie(p,h).second );\r\n\t\tif(p.per>50&&p.per<=100) {\r\n\t\t\te.find('.sector-f').eq(1).css({\"clip\": \"rect(\"+0+\"px, \"+h+\"px, \"+h+\"px, \"+h/2+\"px)\"})\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction offset(o) {\r\n\tvar s = {\r\n\t\t\"transform\": \"rotate(\"+o+\"deg)\",\r\n\t\t\"-ms-transform\": \"rotate(\"+o+\"deg)\",\r\n\t\t\"-webkit-transform\": \"rotate(\"+o+\"deg)\"\r\n\t};\r\n\treturn s;\r\n}\r\nfunction percentToPie(s,h) {\r\n\tvar deg;\r\n\tvar o;\r\n\tvar cssopt = {};\r\n\tif(s.per<=25) {\r\n\t\ts.per += 0.5;\r\n\t\tcssopt.scliptop = 0;\r\n\t\tcssopt.sclipright = h;\r\n\t\tcssopt.sclipbottom = h/2;\r\n\t\tcssopt.sclipleft = h/2;\r\n\t\tcssopt.srotate = -90+(360*(s.per/100));\r\n\t\tcssopt.fcliptop = 0;\r\n\t\tcssopt.fclipright = h;\r\n\t\tcssopt.fclipbottom = h/2;\r\n\t\tcssopt.fclipleft = h/2;\r\n\t} else if(s.per>25&&s.per<=50) {\r\n\t\ts.per += 0.5;\r\n\t\tcssopt.scliptop = 0;\r\n\t\tcssopt.sclipright = h;\r\n\t\tcssopt.sclipbottom = h;\r\n\t\tcssopt.sclipleft = h/2;\r\n\t\tcssopt.srotate = -180+(360*(s.per/100));\r\n\t\tcssopt.fcliptop = 0;\r\n\t\tcssopt.fclipright = h;\r\n\t\tcssopt.fclipbottom = h;\r\n\t\tcssopt.fclipleft = h/2;\r\n\t} else if(s.per>50&&s.per<=75) {\r\n\t\ts.per += 0.5;\r\n\t\tcssopt.scliptop = 0;\r\n\t\tcssopt.sclipright = h;\r\n\t\tcssopt.sclipbottom = h;\r\n\t\tcssopt.sclipleft = h/2;\r\n\t\tcssopt.srotate = -180+(360*((s.per-50)/100));\r\n\t\tcssopt.fcliptop = 0;\r\n\t\tcssopt.fclipright = h;\r\n\t\tcssopt.fclipbottom = h;\r\n\t\tcssopt.fclipleft = h/2;\r\n\t\tcssopt.frotate = 179;\r\n\t} else if(s.per>75&&s.per<=100) {\r\n\t\ts.per += 0.5;\r\n\t\tcssopt.scliptop = 0;\r\n\t\tcssopt.sclipright = h;\r\n\t\tcssopt.sclipbottom = h;\r\n\t\tcssopt.sclipleft = h/2;\r\n\t\tcssopt.srotate = -360+(360*(s.per/100));\r\n\t\tcssopt.fcliptop = 0;\r\n\t\tcssopt.fclipright = h;\r\n\t\tcssopt.fclipbottom = h;\r\n\t\tcssopt.fclipleft = h/2;\r\n\t\tcssopt.frotate = 179;\r\n\t}\r\n\r\n\to = {\r\n\t\tsecond: {\r\n\t\t\t\"clip\": \"rect(\"+cssopt.scliptop+\"px, \"+cssopt.sclipright+\"px, \"+cssopt.sclipbottom+\"px, \"+cssopt.sclipleft+\"px)\",\r\n\t\t\t\"transform\": \"rotate(\"+cssopt.srotate+\"deg)\",\r\n\t\t\t\"-ms-transform\": \"rotate(\"+cssopt.srotate+\"deg)\",\r\n\t\t\t\"-webkit-transform\": \"rotate(\"+cssopt.srotate+\"deg)\",\r\n\t\t\tbackground: s.color\r\n\t\t}, first: {\r\n\t\t\t\"clip\": \"rect(\"+cssopt.fcliptop+\"px, \"+cssopt.fclipright+\"px, \"+cssopt.fclipbottom+\"px, \"+cssopt.fclipleft+\"px)\"\r\n\t\t}\r\n\t};\r\n\tif(s.per>50&&s.per<=100) {\r\n\t\to.first = {\r\n\t\t\t\"clip\": \"rect(\"+cssopt.fcliptop+\"px, \"+cssopt.fclipright+\"px, \"+cssopt.fclipbottom+\"px, \"+cssopt.fclipleft+\"px)\",\r\n\t\t\t\"transform\": \"rotate(\"+cssopt.frotate+\"deg)\",\r\n\t\t\t\"-ms-transform\": \"rotate(\"+cssopt.frotate+\"deg)\",\r\n\t\t\t\"-webkit-transform\": \"rotate(\"+cssopt.frotate+\"deg)\"\r\n\t\t}\r\n\t}\r\n\treturn o;\r\n}\r\n\r\n\r\nfunction totalValue(a) {\r\n\tvar u = 0;\r\n\t$.each(a, function(v,k) {\r\n\t\tif (typeof k[1] == 'number') u += k[1];\r\n\t});\r\n\treturn u;\r\n}\r\n\r\nfunction get_random_color() {\r\n\tvar color = [\r\n\t\"#2ecc71\",\r\n\t\"#3498db\",\r\n\t\"#9b59b6\",\r\n\t\"#e74c3c\",\r\n\t\"#e67e22\",\r\n\t\"#34495e\",\r\n\t\"#8e44ad\",\r\n\t\"#27ae60\"];\r\n\tci++;\r\n\tif(ci>color.length-1) {\r\n\t\tci = 0;\r\n\t}\r\n\tconsole.log(ci);\r\n\treturn color[ci];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}